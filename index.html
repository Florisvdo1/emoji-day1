<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" 
        content="width=device-width, initial-scale=1.0, 
                 viewport-fit=cover" />
  <title>3D Emoji Day Planner</title>

  <!-- Inline all your CSS (main.css + advanced transitions + 3D illusions) -->
  <style>
    /* Basic resets */
    *, *::before, *::after { box-sizing: border-box; }

    body {
      margin: 0; 
      font-family: -apple-system, BlinkMacSystemFont, sans-serif;
      background: #ffffff; 
      color: #000;
      perspective: 800px; /* For subtle 3D transforms if desired */
    }

    header {
      background: #003366; 
      color: #fff;
      text-align: center;
      padding: 1em;
      position: sticky; 
      top: 0; 
      z-index: 10;
    }

    .container {
      max-width: 600px;
      margin: 0 auto;
      padding: 1em;
      transform: translateZ(0); /* This layer is at base level */
    }

    /* The schedule timeline */
    .hour-block {
      display: flex;
      border-bottom: 1px solid #ccc;
      padding: 0.5em 0;
      transition: transform 0.4s ease;
    }
    .hour-block:hover {
      transform: translateZ(10px) rotateX(2deg); /* subtle 3D pop */
    }

    .hour-label {
      width: 60px; 
      color: #003366; 
      font-weight: bold;
      flex-shrink: 0;
    }

    .slots {
      flex: 1; 
      display: flex; 
      flex-wrap: wrap; 
      gap: 4px;
    }
    .slot {
      flex: 1 1 22%; 
      min-height: 50px;
      background: #f9f9ff; 
      border: 2px solid #e0e0f0; 
      border-radius: 4px;
      position: relative;
      transition: border-color 0.2s ease;
    }
    .slot.highlight {
      border-color: #4A90E2;
    }

    .task-emoji {
      font-size: 1.4em; 
      cursor: grab;
      user-select: none; 
      display: inline-block;
      margin: 2px;
      transition: transform 0.2s ease;
    }
    .task-emoji:active {
      cursor: grabbing;
    }

    /* 3D tilt effect on drag or hover if you want more flair */
    .task-emoji.dragging {
      transform: scale(1.2) rotateZ(5deg);
    }

    /* Reduce motion for users with that preference */
    @media (prefers-reduced-motion: reduce) {
      * {
        transition: none !important;
        animation: none !important;
      }
      .hour-block:hover { transform: none !important; }
    }
  </style>
</head>

<body>
  <header>
    <h1>üìÖ 3D Emoji Planner</h1>
    <div id="currentTime" aria-live="polite"></div>
  </header>

  <div class="container" id="planner">
    <!-- Hour blocks 6 AM - Midnight (shown in code or generated by JS) -->
    <!-- e.g., repeated blocks with .hour-block, .hour-label, .slots, .slot elements -->
  </div>

  <div aria-live="polite" id="dragStatus" style="position:absolute; left:-9999px;"></div> 

  <!-- Inline JavaScript (dragDrop.js, timeDisplay.js, etc.) -->
  <script>
    /*************************************
     * timeDisplay.js
     *************************************/
    function updateClock() {
      const now = new Date();
      let hrs = now.getHours(), mins = now.getMinutes();
      const ampm = hrs >= 12 ? 'PM' : 'AM';
      let displayHrs = ((hrs + 11) % 12) + 1;
      let displayMins = mins.toString().padStart(2, '0');
      document.getElementById('currentTime').innerText =
        \`Current time: \${displayHrs}:\${displayMins} \${ampm}\`;
    }
    setInterval(updateClock, 60000);
    updateClock();

    /*************************************
     * planner generation
     *************************************/
    const plannerEl = document.getElementById('planner');
    // Generate 6:00 AM to 12:00 midnight
    for(let h=6; h<24; h++){
      const hourBlock = document.createElement('div');
      hourBlock.className = 'hour-block';

      const label = document.createElement('div');
      label.className = 'hour-label';
      let displayH = ((h + 11) % 12) + 1;
      let ampm = h >= 12 ? 'PM' : 'AM';
      label.textContent = \`\${displayH}:00 \${ampm}\`;

      const slotsDiv = document.createElement('div');
      slotsDiv.className = 'slots';

      for(let quarter=0; quarter<4; quarter++){
        const slot = document.createElement('div');
        slot.className = 'slot';
        slot.dataset.time = \`\${h}:\${quarter*15}\`; // e.g., "8:15"

        // Attach drag event for HTML5 DnD or custom approach
        slot.ondragover = (e)=>{ e.preventDefault(); };
        slot.ondrop = onDrop;
        slot.ondragenter = (e)=> slot.classList.add('highlight');
        slot.ondragleave = (e)=> slot.classList.remove('highlight');
        
        slotsDiv.appendChild(slot);
      }

      hourBlock.appendChild(label);
      hourBlock.appendChild(slotsDiv);
      plannerEl.appendChild(hourBlock);
    }

    /*************************************
     * dragDrop.js
     *************************************/
    function onDragStart(e){
      e.dataTransfer.setData("text/plain", e.target.id);
      e.dataTransfer.effectAllowed = "move";
      e.target.classList.add("dragging");
      announce(\`Picked up \${e.target.innerText.trim()}.\`);
    }

    function onDrop(e){
      e.preventDefault();
      const data = e.dataTransfer.getData("text/plain");
      const draggedEl = document.getElementById(data);
      e.currentTarget.appendChild(draggedEl);
      draggedEl.classList.remove("dragging");
      e.currentTarget.classList.remove("highlight");
      announce(\`Dropped at \${formatSlotTime(e.currentTarget.dataset.time)}.\`);
      if(navigator.vibrate) navigator.vibrate(30); // not supported on iOS
    }

    function announce(msg){
      document.getElementById('dragStatus').textContent = msg;
    }

    function formatSlotTime(timeStr){
      // quick parse: "8:15" => "8:15 AM/PM"
      let [hour, mins] = timeStr.split(':').map(Number);
      let ampm = hour >= 12 ? "PM" : "AM";
      let dispH = ((hour + 11) % 12) + 1;
      return \`\${dispH}:\${mins.toString().padStart(2,'0')} \${ampm}\`;
    }

    /*************************************
     * Generate some sample tasks with unique IDs
     *************************************/
    const sampleTasks = ["üçΩÔ∏è Breakfast", "üè´ School", "üèÉ‚Äç‚ôÇÔ∏è Exercise", "üìñ Reading"];
    const container = document.createElement('div');
    container.style.margin = "1em 0";
    container.innerHTML = "<strong>Available Tasks:</strong> ";
    document.body.insertBefore(container, plannerEl);

    sampleTasks.forEach((txt, i)=>{
      const span = document.createElement('span');
      span.className = "task-emoji";
      span.textContent = txt;
      span.id = "task"+i; // ID needed for DnD
      span.draggable = true;
      span.ondragstart = onDragStart;
      container.appendChild(span);
    });
  </script>
</body>
</html>
